import { Tabs } from 'expo-router';
import React, { useMemo } from 'react';

import { HapticTab } from '@/components/haptic-tab';
import CustomTabBar from '@/components/TabBar';
import Icon from '@/components/ui/icons/Icon';
import { IconName } from '@/components/ui/icons/icon-names';
import { Palette, Theme } from '@/constants/theme';
import { useTheme } from '@/hooks/use-theme';
import { View } from 'react-native';

export default function TabLayout() {
    const {theme} = useTheme();
    const isDark = useMemo(() => theme === 'dark', [theme]);
    console.log({isDark,theme});
    
    return (
        <View style={{ flex: 1 }}>
            <Tabs

                screenOptions={{
                    tabBarActiveTintColor:
                        Palette.primary.flowAqua,
                    headerShown: false,
                    tabBarShowLabel: false,

                    tabBarButton: HapticTab,
                    tabBarStyle: {
                        justifyContent: 'center',
                        height: 64,
                        alignContent: 'center',

                    },
                    tabBarIconStyle: {
                        height: '100%',
                    },
                }}
                tabBar={(props) => <CustomTabBar inactiveSteps={[2]} {...props} />}
            >

                <Tabs.Screen
                    name="home"
                    options={{
                        title: 'Home',
                        tabBarIcon: ({ color, focused }) => (
                            <Icon name={focused ? IconName.Property1RampaSolid : IconName.Property1RampaOutline} size={24} color={color} />
                        ),
                    }}
                />

                <Tabs.Screen
                    name="wallet"
                    options={{
                        title: 'Wallet',
                        tabBarIcon: ({ color, focused }) => (
                            <Icon name={focused ? IconName.Property1Card : IconName.Property1CardOutline} size={24} color={color} />
                        ),
                    }}
                />
                <Tabs.Screen
                    name="send"
                    options={{
                        title: 'Send',
                        tabBarIcon: ({ color, focused }) => (
                            <Icon name={IconName.Property1Send} bordered={!isDark && !focused} size={24} bgColor={focused ? color : isDark?Palette.neutral.graphiteGrey:'transparent'}   label='Send' shape='circle' borderColor={Theme.light.icon.normal} />
                        ),
                    }}
                />

                <Tabs.Screen
                    name="invest"
                    options={{
                        title: 'Invest',
                        tabBarIcon: ({ color, focused }) => (
                            <Icon name={focused ? IconName.Property1Chart : IconName.Property1ChartOutline} size={24} color={color} />
                        ),
                    }}
                />
                <Tabs.Screen
                    name="explore"
